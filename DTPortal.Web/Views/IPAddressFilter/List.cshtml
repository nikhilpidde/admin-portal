@model DTPortal.Web.ViewModel.IPAddressFilter.IPAddressFilterListViewModel

@{
    ViewData["Title"] = "IPAddressFilter";
}

@{await Html.RenderPartialAsync("_AlertBox");}
<div class="row">
    <div class="col-md-12">
        <div class="card">
            <div class="card-body ">
                <div class="row p-b-20">
                    <div class="col-md-6 col-sm-6 col-6">
                        <div class="btn-group">

                        </div>
                    </div>

                </div>
                <table id="userTable" class="table table-striped table-bordered table-hover table-checkable order-column full-width">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Description</th>
                            @*<th>IpAddress</th>*@
                            @*<th>IP Type</th>
                                <th>Permission</th>*@
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        @if (Model.List == null || Model.List.Count() == 0)
                        {
                            <tr class="dataTables_empty">
                                <td style="text-align:center" valign="top" colspan="5" class="dataTables_empty">No record found</td>
                            </tr>

                        }
                        else
                        {

                            @foreach (var item in Model.List)
                            {
                                <tr class="odd gradeX">
                                    <td>@item.Name</td>
                                    <td>@item.Description</td>
                                    @*<td>@item.Ip</td>*@
                                    @*<td>@item.Type</td>
                                        <td>@item.Permission</td>*@
                                    <td class="valigntop">
                                        @*@if (!User.IsInRole("Roles Checker"))
                                            {*@
                                        <div class="btn-group">
                                            <button class="btn btn-xs deepPink-bgcolor no-margin" type="button" data-toggle="dropdown"
                                                    aria-expanded="false">
                                                Actions
                                                <i class="fa fa-angle-down"></i>
                                            </button>
                                            <ul class="dropdown-menu pull-left" role="menu">
                                                <li>
                                                    <a asp-action="Edit" asp-route-id="@item.Id">
                                                        <i class="icon-pencil"></i>Edit
                                                    </a>
                                                </li>
                                                @*<li>
                                                        <a class="js-delete" data-id="@item.Id">
                                                            <i class="fa fa-trash"></i>Delete
                                                        </a>
                                                    </li>*@

                                            </ul>
                                        </div>
                                        @*}
                                            else
                                            {
                                                if (item.State == "UPDATED" || item.State == "BLOCKED")
                                                {

                                                    <div class="btn-group">
                                                        <button class="btn btn-xs deepPink-bgcolor no-margin" type="button" data-toggle="dropdown"
                                                                aria-expanded="false">
                                                            Actions
                                                            <i class="fa fa-angle-down"></i>
                                                        </button>
                                                        <ul class="dropdown-menu pull-left" role="menu">
                                                            <li>
                                                                <a href="@Url.Action("Edit", "RoleManagement", new { id = item.Id })">
                                                                    <i class="icon-docs"></i>View
                                                                </a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                }
                                            }*@
                                    </td>
                                </tr>
                            }
                        }
                    </tbody>
                </table>

            </div>
        </div>
    </div>
</div>



<style>
    .disabled {
        color: currentColor;
        cursor: not-allowed;
        opacity: 0.5;
        text-decoration: none;
    }
</style>
@section scripts
{
    <script>

    $(document).ready(function() {

        $('#administrationSidebarElement').addClass('active');
         $('#AccessFilterSidebarElement').addClass('active');
             $('#IpAddFilterSidebarElement').addClass('active');

             $('#adminSubmenu').addClass('show');
         $('#AccessFilterSubmenu').addClass('show');

             $("li#administrationSidebarElement a:first").attr('aria-expanded', 'true');
         $("li#AccessFilterSidebarElement a:first").attr('aria-expanded', 'true');


         /*For Beadcrum Start*/
         $('#homeMenu').addClass('breadcrumb-item').append('Digital Authentication');
         $('#mainMenu').addClass('breadcrumb-item active').append('AccessFilter > IPAddress Filter');
         $('#subMenu').removeClass('breadcrumb-item');

    //  $('#AuthenticationService').toggle();

    var table = $("#example4").DataTable({
        "bLengthChange": false,
        "bPaginate": false,
        "bInfo": false,
        "searching": false
    });

    $('#userTable').on('click', '.js-delete', function() {
        var deleteButton = $(this);
        var id = deleteButton.attr("data-id");
        if (confirm("Are you sure you want to delete user with " + id))
        {
            $.ajax({
            type: 'POST',
            cache: false,
            dataType: 'json',
            url: '@Url.Action("Delete", "IPAddressFilter")',
            data:
                {
                  id: id
                },
                beforeSend: function () {
                    $('#overlay').show();
                },
                complete: function () {
                    $('#overlay').hide();
                },
                success: function() {
                     window.location.reload();
                    },
                error: ajaxErrorHandler
            });
        }
    });


    });

    </script>
}





@*<div class="col-sm-12 col-md-7 paginationStyle">
        <div class="dataTables_paginate paging_simple_numbers">
            <ul class="pagination">
                <li class="paginate_button page-item previous">
                    <a aria-controls="complex_header" asp-action="List"
                       asp-route-pageNumber="@(Model.Users.PageIndex - 1)"
                       class="page-link ">
                        Previous
                    </a>
                </li>

                @{
                    int count = -2;
                    while (count <= 2)
                    {
                        var index = Model.Users.PageIndex + count;

                        if (index > 0 && index < Model.Users.TotalPages)
                        {
                            if (index == Model.Users.PageIndex)
                            {
                                <li class="paginate_button page-item active">
                                    <a href="#" aria-controls="example4" asp-action="List" asp-route-pageNumber="@index"
                                       data-dt-idx="1" tabindex="0" class="page-link">@index</a>
                                </li>
                            }
                            else
                            {
                                <li class="paginate_button page-item">
                                    <a href="#" aria-controls="example4" asp-action="List" asp-route-pageNumber="@index"
                                       data-dt-idx="1" tabindex="0" class="page-link">@index</a>
                                </li>
                            }
                        }
                        count++;
                    }
                }

                <li class="paginate_button page-item next" id="complex_header_next">
                    <a aria-controls="complex_header" asp-action="List"
                       asp-route-pageNumber="@(Model.Users.PageIndex + 1)"
                       class="page-link @nextDisabled">
                        Next
                    </a>
                </li>
            </ul>
        </div>
    </div>*@
