@model DTPortal.Web.ViewModel.Beneficiary.AddMultipleBeneficiariesViewModel
@inject Microsoft.Extensions.Configuration.IConfiguration Configuration
@{
    var clientName = @Configuration["ProjectName"] as string;
}
<style>
    table, th, td {
        border: 1px solid black;
        border-collapse: collapse;
    }

    table {
        page-break-inside: auto;
    }

    tr {
        page-break-inside: avoid;
        page-break-after: auto;
    }

    thead {
        display: table-header-group;
    }

    td, th {
        border: 1px solid gray;
        padding: 10px;
        font-size: 18px;
        text-align: center;
    }

    table th {
        background-color: #AEC737;
        color: white;
    }
</style>


<div class="table-wrap">
    <div class="table-responsive">
        <div style="margin-bottom:3%">
             <label class="col-form-label">Organization Name: </label>&nbsp;&nbsp;@Model.MultipleBeneficiaries[0].sponsorName
        </div>
        </div>
        <table class="table display product-overview mb-30" id="support_table5">
            <thead>
                <tr>
                <th>@clientName Email</th>
                    <th>National Id</th>
                    <th>Passport</th>
                    <th>Mobile Number</th>

                    <th>Digital Signature</th>
                    <th>Signature Validity</th>
                    <th>Signature Valid From</th>
                    <th>Signature Valid Up To</th>

                    <th>User Subscription</th>
                    <th>Subscription Validity</th>
                    <th>Subscription Valid From</th>
                    <th>Subscription Valid Up To</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.MultipleBeneficiaries)
                {
                    <tr class="odd gradeX">
                        <td>@(string.IsNullOrWhiteSpace(item.beneficiaryUgpassEmail) ? "N/A" : item.beneficiaryUgpassEmail)</td>
                        <td>@(string.IsNullOrWhiteSpace(item.beneficiaryNin) ? "N/A" : item.beneficiaryNin)</td>
                        <td>@(string.IsNullOrWhiteSpace(item.beneficiaryPassport) ? "N/A" : item.beneficiaryPassport)</td>
                        <td>@(string.IsNullOrWhiteSpace(item.beneficiaryMobileNumber) ? "N/A" : item.beneficiaryMobileNumber)</td>

                        @{
                            var service = item.beneficiaryValidities.FirstOrDefault(v => v.privilegeServiceId == 1);
                            if (service != null)
                            {
                                        <td>True</td>
                                        <td>@service.validityApplicable</td>
                                        <td>@(service.validFrom.HasValue ? service.validFrom.Value.ToString("yyyy-MM-dd") : "N/A")</td>
                                        <td>@(service.validUpTo.HasValue ? service.validUpTo.Value.ToString("yyyy-MM-dd") : "N/A")</td>
                            }
                            else
                            {
                                        <td>False</td>
                                        <td>N/A</td>
                                        <td>N/A</td>
                                        <td>N/A</td>
                            }
                        }
                        @{
                            var service1 = item.beneficiaryValidities.FirstOrDefault(v => v.privilegeServiceId == 2);
                            if (service1 != null)
                            {
                                        <td>True</td>
                                        <td>@service.validityApplicable</td>
                                        <td>@(service1.validFrom.HasValue ? service.validFrom.Value.ToString("yyyy-MM-dd") : "N/A")</td>
                                        <td>@(service1.validUpTo.HasValue ? service.validUpTo.Value.ToString("yyyy-MM-dd") : "N/A")</td>
                            }
                            else
                            {
                                        <td>False</td>
                                        <td>N/A</td>
                                        <td>N/A</td>
                                        <td>N/A</td>
                            }
                        }
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
