@model IList<DTPortal.Core.DTOs.DiscountVolumeRangeDTO>

<style>
    .inputWidth {
        width: 95%;
        padding-left: 0px;
    }
</style>

<div class="form-row">
    <label class="col-form-label">Discount Volume Range</label>
    <table class="table table-striped table-bordered table-hover table-checkable order-column full-width">
        <thead>
            <tr>
                <th width="22%" class="form-group">Volume Range From</th>
                <th width="22%" class="form-group">Volume Range To</th>
                <th width="20%" class="form-group">Discount (%)</th>
                <th width="15%"></th>
            </tr>
        </thead>
        <tbody id="discountVolumeRangetbody">
            @if (Model != null && Model.Count > 0)
            {
                @for (int i = 0; i < Model.Count; i++)
                {
                    var range = Model[i];
                    <tr style="@(i == (Model.Count - 1) ? "" : "pointer-events: none; opacity: 0.8")">
                        <td style='display: none;'><input name='DiscountVolumeRanges.Index' value='@i' /></td>
                        <td style='display: none;'><input name='DiscountVolumeRanges[@i].Id' type='text' value='@range.Id'></td>
                        <td>
                            <input type='number' min='0' class="required inputWidth" name='DiscountVolumeRanges[@i].VolumeRangeFrom' value='@range.VolumeRangeFrom'>
                            <span class='text-danger field-validation-valid' data-valmsg-for='DiscountVolumeRanges[@i].VolumeRangeFrom' data-valmsg-replace='true'></span>
                        </td>
                        <td>
                            <input type='number' min='1' class="required inputWidth" name='DiscountVolumeRanges[@i].VolumeRangeTo' value='@range.VolumeRangeTo'>
                            <span class='text-danger field-validation-valid' data-valmsg-for='DiscountVolumeRanges[@i].VolumeRangeTo' data-valmsg-replace='true'></span>
                        </td>
                        <td>
                            <input style='width:30%' type='number' class="required inputWidth" name='DiscountVolumeRanges[@i].Discount' value='@range.Discount'>
                            <span class='text-danger field-validation-valid' data-valmsg-for='DiscountVolumeRanges[@i].Discount' data-valmsg-replace='true'></span>
                        </td>
                        <td>
                            <div class="form-row">
                                <a class="btn btn-info add-range" style="@(i == (Model.Count - 1) ? "margin-left:2px" : "margin-left:2px; display: none;")">
                                    <i class="fa fa-plus"></i>
                                </a>
                                @if (i != 0)
                                {
                                    <a class="btn btn-tbl-delete delete-range" style="margin-left:2px">
                                        <i class="fa fa-minus"></i>
                                    </a>
                                }
                            </div>
                        </td>
                    </tr>
                }
            }
            else
            {
                <tr>
                    <td style='display: none;'><input name='DiscountVolumeRanges.Index' value='0' /></td>
                    <td style='display: none;'><input name='DiscountVolumeRanges[0].Id' type='text' value='0'></td>
                    <td>
                        <input type='number' min='1' class="required inputWidth" name='DiscountVolumeRanges[0].VolumeRangeFrom' value='1'>
                        <span class='text-danger field-validation-valid' data-valmsg-for='DiscountVolumeRanges[0].VolumeRangeFrom' data-valmsg-replace='true'></span>
                    </td>
                    <td>
                        <input type='number' min='1' class="required inputWidth" name='DiscountVolumeRanges[0].VolumeRangeTo' value='100'>
                        <span class='text-danger field-validation-valid' data-valmsg-for='DiscountVolumeRanges[0].VolumeRangeTo' data-valmsg-replace='true'></span>
                    </td>
                    <td>
                        <input style='width:30%' type='number' class="required inputWidth" name='DiscountVolumeRanges[0].Discount' value='10'>
                        <span class='text-danger field-validation-valid' data-valmsg-for='DiscountVolumeRanges[0].Discount' data-valmsg-replace='true'></span>
                    </td>
                    <td>
                        <div class="form-row">
                            <a class="btn btn-action-outline btn-info add-range" id="hidePlus" style="margin-left:2px">
                                <i class="fa fa-plus"></i>
                            </a>
                        </div>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>

<script>
    //$(document).on('change keyup blur', '.inputWidth', function (e) {
    //    var fullPay;
    //    id_arr = $(this).attr('name');
    //    id = id_arr.split(".");
    //    if (id[1] == "VolumeRangeFrom"){
    //        fullPay = $("input[name='DiscountVolumeRanges[0].VolumeRangeTo']").val();
    //        if ($(this).val() > parseInt(fullPay)) {
    //            e.preventDefault();
    //            $(this).val(fullPay - 1);
    //            $(this).next("span").text("VolumeRangeFrom cannot be greater than VolumeRangeTo");
    //        }
    //    }
    //    if (id[1] == "VolumeRangeTo") {
    //        fullPay = $('input[name="DiscountVolumeRanges[0].VolumeRangeFrom"]').val();
    //        if ($(this).val() < parseInt(fullPay)) {
    //            e.preventDefault();
    //            $(this).val(parseInt(+fullPay + 1));
    //            $(this).next("span").text("VolumeRangeTo cannot be less than VolumeRangeFrom");
    //        }
    //    }       
    //});
</script>
