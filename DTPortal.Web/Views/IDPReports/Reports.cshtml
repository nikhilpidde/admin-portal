@model DTPortal.Web.ViewModel.IDPReports.IDPReportsViewModel
@using DTPortal.Web.Enums
@using Newtonsoft.Json

@{ ViewData["Title"] = "Reports"; }

<div class="column">
    <div class="col-md-12">
        <div class="card-custom">
            <div class="card-body">
                <form method="post" asp-action="Reports">
                    <div class="form-row">
                        <div class="form-group col-md-4">
                            <label asp-for="Identifier"></label>
                            <input asp-for="Identifier" class="form-control" />
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-4">
                            <label asp-for="ServiceName"></label>
                            <select asp-for="ServiceName" asp-items="Html.GetEnumSelectList<DigitalAuthenticationOperationNames>()" class="form-control mb-3">
                                <option value="">select</option>
                            </select>
                        </div>
                        <div class="col-md-2">

                        </div>
                        <div class="form-group col-md-4" hidden>
                            <label asp-for="TransactionType"></label>
                            <select asp-for="TransactionType" asp-items="Html.GetEnumSelectList<TransactionType>()" class="form-control mb-3">
                                <option value="">select</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-4">
                            <label asp-for="StartDate"></label>
                            <input class="form-control datepicker" asp-for="StartDate" type="text">
                            <span asp-validation-for="StartDate" class="text-danger"></span>
                        </div>
                        <div class="col-md-2">

                        </div>
                        <div class="form-group col-md-4">
                            <label asp-for="EndDate"></label>
                            <input class="form-control datepicker" asp-for="EndDate" type="text">
                            <span asp-validation-for="EndDate" class="text-danger"></span>
                        </div>

                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-4">
                            <label asp-for="PerPage"></label>
                            <select asp-for="PerPage" class="form-control mb-3">
                                <option value="10">10</option>
                                <option value="20">20</option>
                                <option value="30">30</option>
                            </select>
                            <span asp-validation-for="PerPage" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="d-flex justify-content-end ">
                        <button type="submit" value="Submit" class="btn btn-primary">
                            Submit
                        </button>&nbsp;&nbsp;
                        <button type="button" class="btn btn-danger" onclick="resetFields()">Reset</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    @if (Model.Reports != null)
    {
        if (TempData["SearchDetails"] != null)
        {
            TempData.Keep("SearchDetails");
        }
        @await Html.PartialAsync("_ReportsTable", Model.Reports)
    }
</div>

<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" asp-append-version="true"/>

@section Scripts {

    <script src="//code.jquery.com/ui/1.12.1/jquery-ui.js" asp-append-version="true"></script>
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}

    <script>
        $(document).ready(function () {
            $('#digitalAuthSidebarElement').addClass('active');
            $('#idpReportSidebarElement').addClass('active');

            $('#homeSubmenu').addClass('show');
            $("li#digitalAuthSidebarElement a:first").attr('aria-expanded', 'true');


            /*For Beadcrum Start*/
            $('#homeMenu').addClass('breadcrumb-item').append('Digital Authentication');
            $('#mainMenu').addClass('breadcrumb-item active').append('Reports');
            $('#subMenu').removeClass('breadcrumb-item');

            var today = new Date();
            $('.datepicker').datepicker({
                dateFormat: "yy-mm-dd",
                changeMonth: true,
                changeYear: true,
                maxDate: new Date(today.getFullYear(), today.getMonth(), today.getDate())
            });
        });

        function resetFields() {
            $('select').val('');
            $("input:text").val("");
            $("input:checkbox").prop('checked', false);
            $('#PerPage option:first').prop('selected', true);
            $('.text-danger').text('');
        }
    </script>
}
