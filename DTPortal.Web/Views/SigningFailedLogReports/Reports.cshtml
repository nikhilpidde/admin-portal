@model DTPortal.Web.ViewModel.SigningFailedLogReports.SigningFailedLogReportsViewModel

@using DTPortal.Web.Enums

@{
    ViewData["Title"] = "Reports";
}

<style>
    .custom-check-box {
        margin-right: 5px;
        -webkit-print-color-adjust: exact;
        vertical-align: top;
        background-repeat: no-repeat;
        background-position: 50%;
        background-size: contain;
        position: relative !important;
        width: 1.125rem;
        height: 1.125rem;
        background-color: #fff;
        border: .125rem solid rgba(0,0,0,0.3);
    }

        .custom-check-box:hover {
            outline: auto;
            outline-color: #5d9ceca3;
        }

    #note {
        padding-right: 10px;
        display: flex;
        justify-content: flex-end;
        padding-bottom: 15px;
    }
    /*#incidents:empty {
                content: "<tr>message foo</tr>";
            }*/
</style>

<div class="column">
    <div class="col-md-12">
        <div class="card-custom">
            <div class="card-body">
                <form method="post" asp-action="Reports">
                    <div id="note">
                        <b>NOTE: </b> (*) Mark fields are mandatory.
                    </div>
                    <br />
                    @*<div class="form-row">
                    <div class="form-group col-md-4">
                    <label asp-for="UserName" class="col-form-label"></label>
                    <input asp-for="UserName" class="form-control" />
                    </div>
                    <div class="col-md-2">
                    </div>
                    <div class="form-group col-md-4">
                    <label asp-for="ModuleName" class="col-form-label"></label>
                    <select asp-for="ModuleName" asp-items="Html.GetEnumSelectList<ModuleName>()" class="form-control mb-3">
                    <option value="">All</option>
                    </select>
                    </div>
                    </div>*@
                    <div class="form-row">
                        <div class="form-group col-md-4">
                            <label asp-for="StartDate" class="col-form-label"></label>
                            <input class="form-control datepicker" asp-for="StartDate" type="text">
                            <span asp-validation-for="StartDate" class="text-danger"></span>
                        </div>
                        <div class="col-md-2">
                        </div>
                        <div class="form-group col-md-4">
                            <label asp-for="EndDate" class="col-form-label"></label>
                            <input class="form-control datepicker" asp-for="EndDate" type="text">
                            <span asp-validation-for="EndDate" class="text-danger"></span>
                        </div>

                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-4">
                            <label asp-for="PerPage" class="col-form-label"></label>
                            <select asp-for="PerPage" class="form-control mb-3">
                                <option value="10">10</option>
                                <option value="20">20</option>
                                <option value="30">30</option>
                            </select>
                            <span asp-validation-for="PerPage" class="text-danger"></span>
                        </div>
                        <div class="col-md-2">
                        </div>
                      
                    </div>
                    <div class="d-flex justify-content-end ">
                        <button type="submit" class="btn btn-primary">
                            Apply
                        </button>&nbsp;&nbsp;
                        <button type="button" class="btn btn-danger" onclick="resetFields()">Clear</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    @if (Model.Reports != null)
    {
        if (TempData["SearchSigningFailedReports"] != null)
        {
            TempData.Keep("SearchSigningFailedReports");
        }
        @await Html.PartialAsync("_SigningFailedReportsTable", Model.Reports)
    }
</div>

<link href="~/assets/css/jquery-ui.css" rel="stylesheet" type="text/css" asp-append-version="true"/>

@section Scripts {

    <script src="~/assets/js/jquery-ui.js"></script>
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }

    <script>
        $(document).ready(function () {

            $('#activityReportsMenu').addClass('active');

            if ($('#sidebar ul li.dropdown.active')) {
                $('#sidebar ul li.dropdown.active ul').addClass('show');
                $('#signingFailedLogReportMenuItem').addClass('active');
                $('#sidebar ul li.dropdown.active a.nav-link.drop-logo').attr('aria-expanded', 'true');
            }

            /*For Beadcrum Start*/
            $('#homeMenu').addClass('breadcrumb-item').append('Activity Reports');
            $('#mainMenu').addClass('breadcrumb-item active').append('Signing Failed Logs');
            $('#subMenu').removeClass('breadcrumb-item');
            /*For Beadcrum End*/

            var today = new Date();
            //$('.datepicker').datepicker({
            //    dateFormat: "yy-mm-dd",
            //    changeMonth: true,
            //    changeYear: true,
            //    maxDate: new Date(today.getFullYear(), today.getMonth(), today.getDate())
            //});

            $("#StartDate").datepicker({
                dateFormat: "yy-mm-dd",
                defaultDate: "+1w",
                changeMonth: true,
                numberOfMonths: 1,
                maxDate: new Date(today.getFullYear(), today.getMonth(), today.getDate()),
                onClose: function (selectedDate) {
                    $("#EndDate").datepicker("option", "minDate", selectedDate);
                }
            });

            $("#EndDate").datepicker({
                dateFormat: "yy-mm-dd",
                defaultDate: "+1w",
                changeMonth: true,
                numberOfMonths: 1,
                maxDate: new Date(today.getFullYear(), today.getMonth(), today.getDate()),
                onClose: function (selectedDate) {
                    $("#StartDate").datepicker("option", "maxDate", selectedDate);
                }
            });
        });

        function resetFields() {
            $('select').val('');
            $("input:text").val("");
            $("input:checkbox").prop('checked', false);
            $('#PerPage option:first').prop('selected', true);
        }
    </script>
}